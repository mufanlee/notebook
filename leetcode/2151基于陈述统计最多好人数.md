# 2151. 基于陈述统计最多好人数

### 题目

游戏中存在两种角色：

- **好人**：该角色只说真话。
- **坏人**：该角色可能说真话，也可能说假话。

给你一个下标从 **0** 开始的二维整数数组 `statements` ，大小为 `n x n` ，表示 `n` 个玩家对彼此角色的陈述。具体来说，`statements[i][j]` 可以是下述值之一：

- `0` 表示 `i` 的陈述认为 `j` 是 **坏人** 。
- `1` 表示 `i` 的陈述认为 `j` 是 **好人** 。
- `2` 表示 `i` 没有对 `j` 作出陈述。

另外，玩家不会对自己进行陈述。形式上，对所有 `0 <= i < n` ，都有 `statements[i][i] = 2` 。

根据这 `n` 个玩家的陈述，返回可以认为是 **好人** 的 **最大** 数目。

 

**示例 1：**

![img](5992%E5%9F%BA%E4%BA%8E%E9%99%88%E8%BF%B0%E7%BB%9F%E8%AE%A1%E6%9C%80%E5%A4%9A%E5%A5%BD%E4%BA%BA%E6%95%B0.assets/logic1.jpg)

```
输入：statements = [[2,1,2],[1,2,2],[2,0,2]]
输出：2
解释：每个人都做一条陈述。
- 0 认为 1 是好人。
- 1 认为 0 是好人。
- 2 认为 1 是坏人。
以 2 为突破点。
- 假设 2 是一个好人：
    - 基于 2 的陈述，1 是坏人。
    - 那么可以确认 1 是坏人，2 是好人。
    - 基于 1 的陈述，由于 1 是坏人，那么他在陈述时可能：
        - 说真话。在这种情况下会出现矛盾，所以假设无效。
        - 说假话。在这种情况下，0 也是坏人并且在陈述时说假话。
    - 在认为 2 是好人的情况下，这组玩家中只有一个好人。
- 假设 2 是一个坏人：
    - 基于 2 的陈述，由于 2 是坏人，那么他在陈述时可能：
        - 说真话。在这种情况下，0 和 1 都是坏人。
            - 在认为 2 是坏人但说真话的情况下，这组玩家中没有一个好人。
        - 说假话。在这种情况下，1 是好人。
            - 由于 1 是好人，0 也是好人。
            - 在认为 2 是坏人且说假话的情况下，这组玩家中有两个好人。
在最佳情况下，至多有两个好人，所以返回 2 。
注意，能得到此结论的方法不止一种。
```

**示例 2：**

![img](5992%E5%9F%BA%E4%BA%8E%E9%99%88%E8%BF%B0%E7%BB%9F%E8%AE%A1%E6%9C%80%E5%A4%9A%E5%A5%BD%E4%BA%BA%E6%95%B0.assets/logic2.jpg)

```
输入：statements = [[2,0],[0,2]]
输出：1
解释：每个人都做一条陈述。
- 0 认为 1 是坏人。
- 1 认为 0 是坏人。
以 0 为突破点。
- 假设 0 是一个好人：
    - 基于与 0 的陈述，1 是坏人并说假话。
    - 在认为 0 是好人的情况下，这组玩家中只有一个好人。
- 假设 0 是一个坏人：
    - 基于 0 的陈述，由于 0 是坏人，那么他在陈述时可能：
        - 说真话。在这种情况下，0 和 1 都是坏人。
            - 在认为 0 是坏人但说真话的情况下，这组玩家中没有一个好人。
        - 说假话。在这种情况下，1 是好人。
            - 在认为 0 是坏人且说假话的情况下，这组玩家中只有一个好人。
在最佳情况下，至多有一个好人，所以返回 1 。 
注意，能得到此结论的方法不止一种。
```

 

**提示：**

- `n == statements.length == statements[i].length`
- `2 <= n <= 15`
- `statements[i][j]` 的值为 `0`、`1` 或 `2`
- `statements[i][i] == 2`

### 解题思路

### 方法一：二进制枚举

由于`n` 的范围小于等于15，因此我们可以枚举每位玩家是好人还是坏人，共有 $$ 2^n $$种不同情况，然后遍历`statements` 看当前枚举是否存在矛盾。

- 使用二进制数表示这个 $$ n $$ 个人中的好人和坏人，其中 $$ 1 $$ 表示好人，$$ 0 $$ 表示坏人；
- 枚举 $$ i ∈ [0, 2^n - 1] $$ 中的所有数字，判断 $$ i $$ 中好人的陈述是否与实际情况矛盾；
- 若不矛盾则 $$ i $$ 是一种合法情况，所有合法情况中好人个数的最大值即为答案。

##### 复杂度分析

- 时间复杂度：$$ O(2^n*n^2) $$
- 空间复杂度：$$ O(1) $$

### 代码

```java
class Solution {
    public int maximumGood(int[][] statements) {
        int ans = 0;
        int n = statements.length;
        for (int i = 1; i < (1 << n); i++) {
            int cnt = countOne(i);
            if (cnt <= ans) continue;
            boolean flag = true;
            out:
            for (int j = 0; j < n; j++) {
                for (int k = 0; k < n; k++) {
                    if (j == k || statements[j][k] == 2) continue;
                    int x = (i >> j) & 1;
                    int y = (i >> k) & 1;
                    if (x == 1 && statements[j][k] != y) {
                        flag = false;
                        break out;
                    }
                }
            }
            if (flag) {
                ans = cnt;
            }
        }
        return ans;
    }

    private int countOne(int x) {
        int res = 0;
        while (x > 0) {
            res++;
            x = x & (x - 1);
        }
        return res;
    }
}
```

